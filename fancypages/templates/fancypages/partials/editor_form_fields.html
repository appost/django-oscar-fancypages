{% load form_tags %}

{# <span class="help-block">{{ form.non_field_errors }}</span> #}
<div class="controls">
{% for field in form %}
    {# Make the field widget type available to templates #}
    {% annotate_form_field field %}

    <div class="widget-settings">
        <div data-behaviours="field-live-update" class="field">
        {% if field.is_hidden %}
            {{ field }}
        {% else %}
            <label for="{{ field.auto_id }}"
                   class="dialog-field-text {% if field.field.required %}required{% endif %}">
                {{ field.label }}{% if field.field.required %} <span>*</span>{% endif %}
            </label>

            {% if field.widget_type == "Textarea" %}
            <div class="wysihtml5-wrapper">
                {% include "fancypages/partials/wysihtml5_toolbar.html" %}
            {% else %}
            <div class="text-field">
            {% endif %}

                {{ field }}
                {% for error in field.errors %}
                    <span class="help-block">{{ error }}</span>
                {% endfor %}

                {% if field.help_text %}
                    <span class='help-block'>
                        {# We allow HTML within form help fields #}
                        {{ field.help_text|safe }}
                    </span>
                {% endif %}
            </div>
        {% endif %}
        </div>
    </div>

{% endfor %}
</div>
